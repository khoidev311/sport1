"use strict";(self.webpackChunkreact_ts_template=self.webpackChunkreact_ts_template||[]).push([[4],{9004:(e,s,t)=>{t.r(s),t.d(s,{default:()=>Q});var a=t(8381),r=t(2524),l=t(7661),o=t(3116),i=t(8358),n=t(4439),c=t(8397),d=t(4592),m=t(2887),u=t(2352),x=t(5981),p=t(8169),b=t(4322),h=t(3310),N=t(9343);const g=e=>{let{title:s,subtitle:t,children:a,footer:r}=e;return(0,N.jsx)("div",{className:"mb-6 flex sm:pb-10 sm:pt-16",children:(0,N.jsxs)("div",{className:"w-full max-w-screen-sm rounded-2xl border-gray-100 bg-white px-3 py-6 xs:px-4 sm:m-auto sm:border-2 sm:px-20 sm:py-12 sm:shadow-md",children:[(0,N.jsx)(h.T,{className:"mx-auto mb-12 mt-6 flex h-14 items-center justify-center"}),(0,N.jsxs)("div",{className:"mb-14 mt-4 md:text-center",children:[(0,N.jsx)("div",{className:"text-xl font-bold sm:text-3xl",children:s}),(0,N.jsx)("div",{className:"mt-1 text-sm font-semibold text-gray-400 sm:mt-3 sm:text-base",children:t})]}),a,(0,N.jsx)("div",{className:"text-center sm:mt-4",children:(0,N.jsx)("div",{className:"mb-2 mt-8 text-center sm:mt-14",children:r})})]})})},j=(0,a.memo)(g);var y=t(9813);const f=e=>{var s,t;return(0,y.Ry)().shape({email:(0,y.Z_)().email(null!==(s=e("emailInvalid"))&&void 0!==s?s:"").required(null!==(t=e("emailRequired"))&&void 0!==t?t:"")})};var v=t(4642),w=t(7174);const I=()=>{const{t:e}=(0,n.$G)("company");return(0,N.jsx)("div",{className:"text-left",children:(0,N.jsxs)(w.rU,{to:x.Fy.LOGIN,className:"flex items-center justify-start font-semibold text-gray-500 hover:text-primary-700 hover:underline sm:inline-block",children:[(0,N.jsx)(v.YFh,{className:"mb-1 mr-2 inline-block"}),(0,N.jsx)("span",{children:e("login")})]})})},S=(0,a.memo)(I),R=()=>{const{t:e}=(0,n.$G)("company"),s=(0,r.s0)(),[t,h]=(0,a.useState)(!1),[g,y]=(0,a.useState)(null),{control:v,handleSubmit:w}=(0,i.cI)({resolver:(0,l.X)(f(e))}),I=w((async t=>{h(!0);try{await b.ON.forgetPassword(t.email),y(null),s("".concat(x.Fy.RESET_PASSWORD,"?email=").concat(t.email))}catch(a){a instanceof o.d7&&y({code:u.n.ACCOUNT_NOT_EXISTS,message:e("emailNotExists",{email:t.email})})}finally{h(!1)}}));return(0,p.Z)(e("forgetPassword")),(0,N.jsx)(j,{title:e("forgetYourPassword"),subtitle:e("forgetPasswordSubtitle"),footer:(0,N.jsx)(S,{}),children:(0,N.jsxs)("form",{className:"grid grid-cols-1 gap-6",onSubmit:I,children:[g&&(0,N.jsx)(c.b,{title:e("forgetPasswordError"),message:g.message,type:"danger",className:"mb-2"}),(0,N.jsx)(m.II,{type:"text",label:e("email"),name:"email",className:"block",disabled:t,control:v}),(0,N.jsx)(d.z,{type:"submit",disabled:t,isLoading:t,children:e("forgetPassword")})]})})},O=(0,a.memo)(R);var T=t(3958),C=t(9107),E=t(800);const _=e=>{var s,t,a;return(0,y.Ry)().shape({email:(0,y.Z_)().email(null!==(s=e("emailInvalid"))&&void 0!==s?s:"").required(null!==(t=e("emailRequired"))&&void 0!==t?t:""),password:(0,y.Z_)().required(null!==(a=e("passwordRequired"))&&void 0!==a?a:"")})};var k=t(9860);const U=(e,s)=>s||(e.includes(k.t.SYSTEM)?x.xL.HOME:e.includes(k.t.ADMIN)?x.no.HOME:x.RO.HOME),q=()=>{var e;const{t:s}=(0,n.$G)("company"),[t]=(0,w.lr)();return(0,N.jsxs)(N.Fragment,{children:[s("doNotHaveAccount"),(0,N.jsx)(w.rU,{to:"".concat(x.Fy.REGISTER,"?redirect=").concat(encodeURIComponent(null!==(e=t.get("redirect"))&&void 0!==e?e:"")),className:"ml-1 block font-semibold underline hover:text-primary-700 sm:inline-block",children:s("createNow")})]})},A=(0,a.memo)(q),P=()=>{var e;const{t:s}=(0,n.$G)("company"),[t,o]=(0,a.useState)(!1),[h,g]=(0,a.useState)(null),[y]=(0,w.lr)(),f=(0,C.Z)(),v=(0,r.s0)(),{control:I,handleSubmit:S,watch:R,...O}=(0,i.cI)({resolver:(0,l.X)(_(s))}),k=R("email"),q=S((e=>{o(!0),b.ON.loginWithEmailAndPassword(e).then((e=>{const s=U([e.role.slug],y.get("redirect"));f((0,E.setUser)(e)),v(s)})).catch((e=>{const{status:s,message:t}=e.response.data;s!==T.UNAUTHORIZED?s!==T.NOT_FOUND?g({...e}):g({code:u.n.ACCOUNT_NOT_EXISTS,message:t}):g({code:u.n.ACCOUNT_INCORRECT,message:t})})).finally((()=>{o(!1)}))}));return(0,p.Z)(s("login")),(0,N.jsx)(j,{title:s("loginTitle"),subtitle:s("loginSubtitle"),footer:(0,N.jsx)(A,{}),children:(0,N.jsx)(i.RV,{control:I,handleSubmit:S,watch:R,...O,children:(0,N.jsxs)("form",{onSubmit:q,className:"grid grid-cols-1 gap-6",children:[h&&(0,N.jsx)(c.b,{title:s("loginError"),message:h.message,type:"danger",className:"mb-2",children:h.code===u.n.ACCOUNT_NOT_EXISTS&&(0,N.jsx)(w.rU,{to:"".concat(x.Fy.REGISTER,"?email=").concat(encodeURIComponent(k||""),"&redirect=").concat(encodeURIComponent(null!==(e=y.get("redirect"))&&void 0!==e?e:"")),children:s("createWithEmail")})}),(0,N.jsx)(m.II,{name:"email",label:s("email"),className:"block",control:I,disabled:t}),(0,N.jsx)(m.II,{type:"password",label:s("password"),name:"password",className:"block",control:I,disabled:t}),(0,N.jsx)("div",{className:"-mb-1.5 -mt-2 flex justify-end",children:(0,N.jsx)(w.rU,{to:x.Fy.FORGET_PASSWORD,className:"text-center text-sm font-semibold text-gray-400 hover:underline",role:"link",tabIndex:-1,children:s("forgetYourPassword")})}),(0,N.jsx)(d.z,{type:"submit",disabled:t,isLoading:t,children:s("login")})]})})})},Z=(0,a.memo)(P);var F=t(3949),G=t(4837);const L=e=>{var s,t,a,r,l,o,i;return(0,G.wN)({firstName:(0,y.Z_)().required(null!==(s=e("firstNameRequired"))&&void 0!==s?s:""),lastName:(0,y.Z_)().required(null!==(t=e("lastNameRequired"))&&void 0!==t?t:""),phone:(0,y.Z_)().required(e("phoneRequired")),email:(0,y.Z_)().email(null!==(a=e("emailInvalid"))&&void 0!==a?a:"").required(null!==(r=e("emailRequired"))&&void 0!==r?r:""),password:(0,y.Z_)().required(null!==(l=e("passwordRequired"))&&void 0!==l?l:""),passwordConfirmation:(0,y.Z_)().oneOf([(0,y.iH)("password")],null!==(o=e("passwordConfirmationNotMatch"))&&void 0!==o?o:"").required(null!==(i=e("passwordConfirmationRequired"))&&void 0!==i?i:""),isAcceptedTerms:(0,y.O7)()})},W=()=>{var e;const{t:s}=(0,n.$G)("company"),[t]=(0,w.lr)();return(0,N.jsxs)(N.Fragment,{children:[s("alreadyHaveAccount"),(0,N.jsx)(w.rU,{to:"".concat(x.Fy.LOGIN,"?redirect=").concat(encodeURIComponent(null!==(e=t.get("redirect"))&&void 0!==e?e:"")),className:"ml-1 block font-semibold underline hover:text-primary-700 sm:inline-block",children:s("loginNow")})]})},H=(0,a.memo)(W),M=()=>{var e;const{t:s}=(0,n.$G)("company"),[t,l]=(0,a.useState)(!1),[o,h]=(0,a.useState)(null),[g]=(0,w.lr)(),y=(0,F.I0)(),f=(0,r.s0)(),{control:v,handleSubmit:I,setValue:S,watch:R}=(0,i.cI)({resolver:L(s)}),O=R("isAcceptedTerms",!1),C=R("email",""),_=I((e=>{l(!0),b.ON.register(e).then((e=>{const s=U([e.role.slug],g.get("redirect"));y((0,E.setUser)(e)),f(s)})).catch((t=>{const{status:a}=t.response.data;a!==T.UNPROCESSABLE_ENTITY?h({...t}):h({code:u.n.ACCOUNT_EXISTS,message:s("emailAlreadyExists",{email:e.email})})})).finally((()=>{l(!1)}))}));return(0,p.Z)(s("register")),(0,a.useEffect)((()=>{const e=g.get("email");e&&S("email",e)}),[g,S]),(0,N.jsx)(j,{title:s("registerTitle"),subtitle:s("registerSubtitle"),footer:(0,N.jsx)(H,{}),children:(0,N.jsxs)("form",{className:"grid grid-cols-1 gap-6",onSubmit:_,children:[o&&(0,N.jsx)(c.b,{title:s("registerError"),message:o.message,type:"danger",className:"mb-2",children:o.code===u.n.ACCOUNT_EXISTS&&(0,N.jsx)(w.rU,{to:"".concat(x.Fy.LOGIN,"?email=").concat(encodeURIComponent(null!==C&&void 0!==C?C:""),"&redirect=").concat(encodeURIComponent(null!==(e=g.get("redirect"))&&void 0!==e?e:"")),children:s("loginNow")})}),(0,N.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,N.jsx)(m.II,{type:"text",label:s("firstName"),name:"firstName",className:"block",disabled:t,control:v}),(0,N.jsx)(m.II,{type:"text",label:s("lastName"),name:"lastName",className:"block",disabled:t,control:v})]}),(0,N.jsx)(m.II,{type:"text",label:s("email"),name:"email",disabled:t,className:"block",control:v}),(0,N.jsx)(m.II,{type:"text",label:s("phone"),id:"phone",name:"phone",className:"block",disabled:t,control:v}),(0,N.jsx)(m.II,{type:"password",label:s("password"),name:"password",className:"block",disabled:t,control:v}),(0,N.jsx)(m.II,{type:"password",label:s("passwordConfirmation"),name:"passwordConfirmation",className:"block",disabled:t,control:v}),(0,N.jsxs)("label",{htmlFor:"isAcceptedTerms",className:"group flex items-center justify-start space-x-4",children:[(0,N.jsx)(m.XZ,{name:"isAcceptedTerms",className:"flex-shrink-0",disabled:t,control:v}),(0,N.jsx)("div",{className:"text-sm font-semibold leading-6 text-gray-400",children:(0,N.jsxs)(n.cC,{i18nKey:"isAcceptedTerm",t:s,children:["0",(0,N.jsx)(w.rU,{to:"/",className:"ml-1 underline hover:text-black",children:"1"})]})})]}),(0,N.jsx)(d.z,{type:"submit",disabled:t||!O,isLoading:t,children:s("register")})]})})},X=(0,a.memo)(M);var $=t(5436),D=t(3353);const Y=e=>{var s,t,a,r;return(0,y.Ry)().shape({password:(0,y.Z_)().required(null!==(s=e("passwordRequired"))&&void 0!==s?s:""),passwordConfirmation:(0,y.Z_)().required(null!==(t=e("passwordConfirmationRequired"))&&void 0!==t?t:"").oneOf([(0,y.iH)("password")],null!==(a=e("passwordConfirmationNotMatch"))&&void 0!==a?a:""),otp:(0,y.Z_)().required(null!==(r=e("otpRequired"))&&void 0!==r?r:"")})},z=()=>{const{t:e}=(0,n.$G)("company");return(0,N.jsx)("div",{className:"text-left",children:(0,N.jsxs)(w.rU,{to:x.Fy.LOGIN,className:"flex items-center justify-start font-semibold text-gray-500 hover:text-primary-700 hover:underline sm:inline-block",children:[(0,N.jsx)(v.YFh,{className:"mb-1 mr-2 inline-block"}),(0,N.jsx)("span",{children:e("login")})]})})},V=(0,a.memo)(z),B=()=>{const{t:e}=(0,n.$G)("company"),s=(0,D.Z)(),[t,h]=(0,a.useState)(!1),[g,y]=(0,a.useState)(null),f=(0,r.s0)(),{control:v,handleSubmit:I}=(0,i.cI)({resolver:(0,l.X)(Y(e))}),{search:S}=(0,r.TH)(),R=(0,a.useMemo)((()=>S.split("?email=").pop()),[S]),O=I((async t=>{h(!0);try{await b.ON.resetPassword(String(R),t),y(null),f("".concat(x.Fy.LOGIN,"?code=").concat(u.n.RESET_PASSWORD)),s.success(e("resetPasswordSuccessfully"))}catch(a){a instanceof o.d7&&y({code:u.n.OTP_INCORRECT,message:e("otpIncorrect")})}finally{h(!1)}}));return(0,p.Z)(e("resetPassword")),(0,N.jsx)(j,{title:e("resetYourPassword"),subtitle:e("resetPasswordSubtitle"),footer:(0,N.jsx)(V,{}),children:(0,N.jsxs)("form",{className:"grid grid-cols-1 gap-6",onSubmit:O,children:[g?(0,N.jsx)(c.b,{title:e("resetPasswordError"),message:g.message,type:"danger",className:"mb-2",children:(0,N.jsx)(w.rU,{to:x.Fy.FORGET_PASSWORD,children:e("requestNewLink")})}):(0,N.jsx)(c.b,{title:e("resetPasswordLinkSent"),message:e("resetPasswordMessage",{email:R}),type:"success",className:"mb-2"}),(0,N.jsx)($.Z,{name:"otp",className:"block w-full",disabled:t,control:v,quantity:6}),(0,N.jsx)(m.II,{type:"password",label:e("password"),name:"password",className:"block",disabled:t,control:v}),(0,N.jsx)(m.II,{type:"password",label:e("passwordConfirmation"),name:"passwordConfirmation",className:"block",disabled:t,control:v}),(0,N.jsx)(d.z,{type:"submit",disabled:t,isLoading:t,children:e("resetPassword")})]})})},K=(0,a.memo)(B),J=()=>(0,N.jsxs)(r.Z5,{children:[(0,N.jsx)(r.AW,{path:"login",element:(0,N.jsx)(Z,{})}),(0,N.jsx)(r.AW,{path:"register",element:(0,N.jsx)(X,{})}),(0,N.jsx)(r.AW,{path:"forget-password",element:(0,N.jsx)(O,{})}),(0,N.jsx)(r.AW,{path:"reset-password",element:(0,N.jsx)(K,{})})]}),Q=(0,a.memo)(J)}}]);
//# sourceMappingURL=4.4066062b.chunk.js.map